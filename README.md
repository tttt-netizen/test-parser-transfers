# Парсер банковских транзакций

Универсальный Python-парсер для обработки уведомлений о банковских транзакциях в различных форматах.

## Использование

### 1. Тестирование 5 примеров из test_case.txt

Запустите `test_parser.py` для парсинга 5 примеров из `test_case.txt`. Результаты будут выведены в консоль в формате JSON, файлы не создаются.

```bash
python test_parser.py
```

Для создания JSON файлов с результатами используйте флаг `-f`:

```bash
python test_parser.py -f
```

Это создаст файлы `test_case_example_1_result.json`, `test_case_example_2_result.json` и т.д.

Если pytest установлен, он автоматически запустит полные тесты. Если нет, установите: `pip install pytest`

### 2. Парсинг .txt файлов в рабочей директории

Поместите любые `.txt` файлы в рабочую директорию и запустите:

```bash
python test_parser.py -d
```

Парсер автоматически найдет все `.txt` файлы, распарсит их и создаст JSON файлы с результатами (`*_result.json`).

### 3. Парсинг с аргументами командной строки

Для быстрого тестирования конкретного сообщения:

```bash
python python_parser.py "UKRSIB" "UKRSIB" "Perekaz: CLIENT001 00.00.0000 00:00:00 na kartku 000000****0000 na sumu 1000.00UAH. Dostupno 1154.16UAH."
```

**Формат:** `python python_parser.py <app_name> <title> <content>`

Результат будет выведен в консоль и сохранен в `result_from_args.json`.

## Формат входных файлов

Создайте `.txt` файл в следующем формате:

```
app_name: UKRSIB
title: UKRSIB
content: Perekaz: CLIENT001 00.00.0000 00:00:00 na kartku 000000****0000 na sumu 1000.00UAH. Dostupno 1154.16UAH.
```

Или с многострочным содержимым:

```
app_name: PUMB
title: Надходження
content: |
  2000.0UAH
  CLIENT NAME
  Картка: *0000
  Доступно: 2000.0UAH
```

## Выходные данные

Парсер возвращает JSON с полями:
- `bank_account_balance` - баланс счета
- `bank_account_currency` - валюта баланса
- `bank_account_details` - номер карты
- `operation_amount` - сумма операции
- `operation_currency` - валюта операции
- `operation_type` - тип операции (`in`, `out`, `reject`, `balance_info`)
- `counterparty_details` - контрагент

## Поддерживаемые форматы

Парсер поддерживает уведомления от различных банков (UKRSIB, PUMB, CA+, TAS2U) и автоматически определяет тип операции.

**Поддерживаемые валюты:** UAH, USD, EUR, GBP, PLN

**Регулярные выражения:**
- Суммы: поддерживаются пробелы (`1 250.50`, `3 500.00`), запятая и точка как разделитель (`5853,79` или `5853.79`)
- Валюты: могут быть прикреплены к сумме (`1000.00UAH`) или отделены пробелом (`3 500.00 UAH`)
- Номера карт: различные форматы (`*0000`, `000000****0000`, `*9876`)
- Типы операций: определяются по ключевым словам на украинском, русском и английском языках
